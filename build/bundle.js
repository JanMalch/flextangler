var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function i(){return Object.create(null)}function a(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function h(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function g(){return d(" ")}function f(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let v;function w(t){v=t}function x(){if(!v)throw new Error("Function called outside component initialization");return v}function $(){const t=x();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const a=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);i.slice().forEach((e=>{e.call(t,a)}))}}}const b=[],y=[],C=[],T=[],R=Promise.resolve();let q=!1;function E(t){C.push(t)}let F=!1;const _=new Set;function H(){if(!F){F=!0;do{for(let t=0;t<b.length;t+=1){const e=b[t];w(e),z(e.$$)}for(w(null),b.length=0;y.length;)y.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];_.has(e)||(_.add(e),e())}C.length=0}while(b.length);for(;T.length;)T.pop()();q=!1,F=!1,_.clear()}}function z(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const I=new Set;let k;function L(){k={r:0,c:[],p:k}}function O(){k.r||a(k.c),k=k.p}function B(t,e){t&&t.i&&(I.delete(t),t.i(e))}function M(t,e,n,i){if(t&&t.o){if(I.has(t))return;I.add(t),k.c.push((()=>{I.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}const D="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function P(t){t&&t.c()}function N(t,e,i){const{fragment:s,on_mount:l,on_destroy:r,after_update:c}=t.$$;s&&s.m(e,i),E((()=>{const e=l.map(n).filter(o);r?r.push(...e):a(e),t.$$.on_mount=[]})),c.forEach(E)}function S(t,e){const n=t.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function j(t,e){-1===t.$$.dirty[0]&&(b.push(t),q||(q=!0,R.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(e,n,o,s,l,r,h=[-1]){const u=v;w(e);const d=n.props||{},g=e.$$={fragment:null,ctx:null,props:r,update:t,not_equal:l,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:h,skip_bound:!1};let f=!1;if(g.ctx=o?o(e,d,((t,n,...i)=>{const a=i.length?i[0]:n;return g.ctx&&l(g.ctx[t],g.ctx[t]=a)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](a),f&&j(e,t)),n})):[],g.update(),f=!0,a(g.before_update),g.fragment=!!s&&s(g.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);g.fragment&&g.fragment.l(t),t.forEach(c)}else g.fragment&&g.fragment.c();n.intro&&B(e.$$.fragment),N(e,n.target,n.anchor),H()}w(u)}class V{$destroy(){S(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function G(t,e,n){const i=t.slice();return i[7]=e[n],i[8]=e,i[9]=n,i}function J(t){let e,n,i;return{c(){e=u("img"),e.src!==(n=t[0][t[9]].src)&&m(e,"src",n),m(e,"alt",i=t[0][t[9]].alt+"}"),m(e,"class","svelte-1a5vzeb")},m(t,n){r(t,e,n)},p(t,a){1&a&&e.src!==(n=t[0][t[9]].src)&&m(e,"src",n),1&a&&i!==(i=t[0][t[9]].alt+"}")&&m(e,"alt",i)},d(t){t&&c(e)}}}function U(t){let e,n,i,o,s,h,v,w,x,$,b,y,C=null==t[0][t[9]]?`Select one ${3!==t[9]?"or more":""} image${3===t[9]?"":"s"}.`:"Swap image.",T=t[9],R=null!=t[0][t[9]]&&J(t);function q(...e){return t[3](t[9],...e)}const E=()=>t[4](v,T),F=()=>t[4](null,T);function _(...e){return t[5](t[9],...e)}return{c(){var a,l,r,c;e=u("div"),R&&R.c(),n=g(),i=u("label"),o=d(C),h=g(),v=u("input"),$=g(),m(i,"for",s="file-"+t[9]),m(i,"class","svelte-1a5vzeb"),m(v,"id",w="file-"+t[9]),m(v,"type","file"),m(v,"accept","image/*"),v.multiple=x=3!==t[9],m(v,"class","svelte-1a5vzeb"),m(e,"class","box-shadow svelte-1a5vzeb"),a=e,l="grid-area",r=String.fromCharCode(t[9]+97),a.style.setProperty(l,r,c?"important":"")},m(t,a){r(t,e,a),R&&R.m(e,null),l(e,n),l(e,i),l(i,o),l(e,h),l(e,v),E(),l(e,$),b||(y=[f(i,"click",q),f(v,"change",_)],b=!0)},p(i,a){null!=(t=i)[0][t[9]]?R?R.p(t,a):(R=J(t),R.c(),R.m(e,n)):R&&(R.d(1),R=null),1&a&&C!==(C=null==t[0][t[9]]?`Select one ${3!==t[9]?"or more":""} image${3===t[9]?"":"s"}.`:"Swap image.")&&p(o,C),T!==t[9]&&(F(),T=t[9],E())},d(t){t&&c(e),R&&R.d(),F(),b=!1,a(y)}}}function W(e){let n,i=e[1],a=[];for(let t=0;t<i.length;t+=1)a[t]=U(G(e,i,t));return{c(){n=u("form");for(let t=0;t<a.length;t+=1)a[t].c();m(n,"class","svelte-1a5vzeb")},m(t,e){r(t,n,e);for(let t=0;t<a.length;t+=1)a[t].m(n,null)},p(t,[e]){if(7&e){let o;for(i=t[1],o=0;o<i.length;o+=1){const s=G(t,i,o);a[o]?a[o].p(s,e):(a[o]=U(s),a[o].c(),a[o].m(n,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=i.length}},i:t,o:t,d(t){t&&c(n),h(a,t)}}}function Y(t,e,n){let{images:i=[]}=e;const a=$();let o=Array(4).fill(null);function s(t,e){const i=o[e].files,s=Math.min(4,e+i.length);for(let t=e;t<s;t++){const a=new DataTransfer;a.items.add(i.item(t-e)),n(1,o[t].files=a.files,o)}const l=o.map((t=>t.files.item(0)));a("filesChange",l)}return t.$$set=t=>{"images"in t&&n(0,i=t.images)},[i,o,s,t=>o[t]?.click(),function(t,e){y[t?"unshift":"push"]((()=>{o[e]=t,n(1,o)}))},(t,e)=>s(0,t)]}class Z extends V{constructor(t){super(),A(this,t,Y,W,s,{images:0})}}function K(t,e){return Object.freeze({x:t,y:e})}const Q=K(0,0),X=Math.sqrt(3)/4,tt=2/Math.sqrt(3);K(0,.5),K(.5,.5),K(.25,X+.5),K(0,.5),K(.5,.5),K(.25,.5-X),K(.25,.5-X),K(.75,.5-X),K(.5,.5),K(.75,.5-X),K(1,.5),K(.5,.5),K(.5,.5),K(1,.5),K(.75,.5+X),K(.5,.5),K(.25,.5+X),K(.75,.5+X);function et(t){return Math.PI*t/180}const nt=[{x:0,y:.5},{x:1,y:1},{x:1,y:0}],it=[{x:0,y:0},{x:1,y:.5},{x:0,y:1}];function at(t,e,n,i){t.moveTo(0,0),t.translate(e.x+e.width*n.x,e.y+e.height*n.y),t.rotate(et(i))}function ot(t,e){return Object.assign(Object.assign({},t),{x:t.x+e.x,y:t.y+e.y})}function st(t,e,n,i,a){null!=a?t.drawImage(n,a.x,a.y,a.width,a.height,i.x+e.x,i.y+e.y,i.width,i.height):t.drawImage(n,i.x+e.x,i.y+e.y,i.width,i.height)}function lt(t,e,n,i,a){t.save(),t.beginPath(),function(t,e,n){const i=ot(e,n[0]);t.moveTo(i.x,i.y);for(let i=1;i<n.length;i++){const a=ot(e,n[i]);t.lineTo(a.x,a.y)}}(t,n,i),t.closePath(),t.clip(),e&&(t.setLineDash([5,5]),t.lineWidth=3,t.strokeStyle="#FF0000",t.stroke()),a(),t.restore()}function rt(e){let n,i,a,o,s,h,f,v,w,x,$,b,y,C,T,R,q,E,F,_,H,z,I,k,L,O,B,M,D,P,N,S,j,A,V,G,J,U,W,Y,Z,K,Q,tt,et,nt,it,at,ot=e[3]?.width.toFixed(2)+"",st=e[3]?.height.toFixed(2)+"",lt=e[4]?.width.toFixed(2)+"",rt=e[4]?.height.toFixed(2)+"",ct=e[5]?.width.toFixed(2)+"",ht=e[5]?.height.toFixed(2)+"",ut=e[6]?.width.toFixed(2)+"",dt=e[6]?.height.toFixed(2)+"";return{c(){n=u("section"),i=u("div"),a=u("b"),o=d("toTriangleCanvas ("),s=d(ot),h=d("\n      ×\n      "),f=d(st),v=d(")"),w=g(),x=u("canvas"),y=g(),C=u("div"),T=u("b"),R=d("rotatedTriangleCanvas ("),q=d(lt),E=d("\n      ×\n      "),F=d(rt),_=d(")"),H=g(),z=u("canvas"),L=g(),O=u("div"),B=u("b"),M=d("fullRotatedTriangleCanvas ("),D=d(ct),P=d("\n      ×\n      "),N=d(ht),S=d(")"),j=g(),A=u("canvas"),J=g(),U=u("div"),W=u("b"),Y=d("scaledRotatedTriangleCanvas ("),Z=d(ut),K=d("\n      ×\n      "),Q=d(dt),tt=d(")"),et=g(),nt=u("canvas"),m(a,"class","svelte-1qb62l3"),m(x,"height",$=e[0].triangleHeight),m(x,"width",b=e[0].triangleBase*(2*X)),m(x,"class","svelte-1qb62l3"),m(T,"class","svelte-1qb62l3"),m(z,"height",I=e[1](e[0].triangleBase*(2*X),e[0].triangleHeight).height),m(z,"width",k=e[1](e[0].triangleBase*(2*X),e[0].triangleHeight).width),m(z,"class","svelte-1qb62l3"),m(B,"class","svelte-1qb62l3"),m(A,"height",V=e[0].triangleHeight),m(A,"width",G=e[0].triangleBase*(2*X)),m(A,"class","svelte-1qb62l3"),m(W,"class","svelte-1qb62l3"),m(nt,"height",it=e[0].triangleHeight),m(nt,"width",at=e[0].triangleBase*(2*X)*e[2]),m(nt,"class","svelte-1qb62l3"),m(n,"class","svelte-1qb62l3")},m(t,c){r(t,n,c),l(n,i),l(i,a),l(a,o),l(a,s),l(a,h),l(a,f),l(a,v),l(i,w),l(i,x),e[12](x),l(n,y),l(n,C),l(C,T),l(T,R),l(T,q),l(T,E),l(T,F),l(T,_),l(C,H),l(C,z),e[13](z),l(n,L),l(n,O),l(O,B),l(B,M),l(B,D),l(B,P),l(B,N),l(B,S),l(O,j),l(O,A),e[14](A),l(n,J),l(n,U),l(U,W),l(W,Y),l(W,Z),l(W,K),l(W,Q),l(W,tt),l(U,et),l(U,nt),e[15](nt)},p(t,[e]){8&e&&ot!==(ot=t[3]?.width.toFixed(2)+"")&&p(s,ot),8&e&&st!==(st=t[3]?.height.toFixed(2)+"")&&p(f,st),1&e&&$!==($=t[0].triangleHeight)&&m(x,"height",$),1&e&&b!==(b=t[0].triangleBase*(2*X))&&m(x,"width",b),16&e&&lt!==(lt=t[4]?.width.toFixed(2)+"")&&p(q,lt),16&e&&rt!==(rt=t[4]?.height.toFixed(2)+"")&&p(F,rt),3&e&&I!==(I=t[1](t[0].triangleBase*(2*X),t[0].triangleHeight).height)&&m(z,"height",I),3&e&&k!==(k=t[1](t[0].triangleBase*(2*X),t[0].triangleHeight).width)&&m(z,"width",k),32&e&&ct!==(ct=t[5]?.width.toFixed(2)+"")&&p(D,ct),32&e&&ht!==(ht=t[5]?.height.toFixed(2)+"")&&p(N,ht),1&e&&V!==(V=t[0].triangleHeight)&&m(A,"height",V),1&e&&G!==(G=t[0].triangleBase*(2*X))&&m(A,"width",G),64&e&&ut!==(ut=t[6]?.width.toFixed(2)+"")&&p(Z,ut),64&e&&dt!==(dt=t[6]?.height.toFixed(2)+"")&&p(Q,dt),1&e&&it!==(it=t[0].triangleHeight)&&m(nt,"height",it),5&e&&at!==(at=t[0].triangleBase*(2*X)*t[2])&&m(nt,"width",at)},i:t,o:t,d(t){t&&c(n),e[12](null),e[13](null),e[14](null),e[15](null)}}}at.LEFT_TOP=K(0,0),at.CENTER_TOP=K(.5,0),at.RIGHT_TOP=K(1,0),at.LEFT_CENTER=K(0,.5),at.CENTER_CENTER=K(.5,.5),at.RIGHT_CENTER=K(1,.5),at.LEFT_BOTTOM=K(0,1),at.CENTER_BOTTOM=K(.5,1),at.RIGHT_BOTTOM=K(1,1);function ct(t,e,n){let{image:i}=e,{inputValues:a}=e,{rotation:o}=e,{secondRotation:s}=e,{secondCanvasDimensions:l=((t,e)=>({width:t,height:e}))}=e,{scalingFactor:r}=e,{clippingTriangle:c}=e,{relativeRectangle:h}=e,u=null,d=null,g=null,f=null;const m=$();var p;return p=()=>(function(){const t=u.getContext("2d");t.clearRect(0,0,u.width,u.height),t.save(),lt(t,!1,Q,c.map((t=>({x:t.x*u.width,y:t.y*u.height}))),(()=>{st(t,Q,i,{x:0,y:0,width:u.width,height:u.height},{x:h.x*i.naturalWidth,y:h.y*i.naturalHeight,width:h.width*i.naturalWidth,height:h.height*i.naturalHeight})})),t.restore()}(),function(){const t=d.getContext("2d");t.save(),o?o(d,u):t.drawImage(u,0,0),t.restore()}(),function(){const t=g.getContext("2d");t.save(),s?s(g,d):t.drawImage(d,0,0),t.restore()}(),function(){const t=f.getContext("2d");t.save(),st(t,Q,g,{x:0,y:0,width:f.width,height:f.height},{x:0,y:0,width:g.width,height:g.height}),t.restore()}(),void m("finish",f)),x().$$.after_update.push(p),t.$$set=t=>{"image"in t&&n(7,i=t.image),"inputValues"in t&&n(0,a=t.inputValues),"rotation"in t&&n(8,o=t.rotation),"secondRotation"in t&&n(9,s=t.secondRotation),"secondCanvasDimensions"in t&&n(1,l=t.secondCanvasDimensions),"scalingFactor"in t&&n(2,r=t.scalingFactor),"clippingTriangle"in t&&n(10,c=t.clippingTriangle),"relativeRectangle"in t&&n(11,h=t.relativeRectangle)},[a,l,r,u,d,g,f,i,o,s,c,h,function(t){y[t?"unshift":"push"]((()=>{u=t,n(3,u)}))},function(t){y[t?"unshift":"push"]((()=>{d=t,n(4,d)}))},function(t){y[t?"unshift":"push"]((()=>{g=t,n(5,g)}))},function(t){y[t?"unshift":"push"]((()=>{f=t,n(6,f)}))}]}class ht extends V{constructor(t){super(),A(this,t,ct,rt,s,{image:7,inputValues:0,rotation:8,secondRotation:9,secondCanvasDimensions:1,scalingFactor:2,clippingTriangle:10,relativeRectangle:11})}}function ut(t,e,n){const i=t.slice();return i[16]=e[n],i[18]=n,i}function dt(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function gt(t){let n,i,a,o,s,h;const f=[t[16],{inputValues:t[3]},{scalingFactor:tt}];let m={};for(let t=0;t<f.length;t+=1)m=e(m,f[t]);return s=new ht({props:m}),s.$on("finish",(function(...e){return t[8](t[15],t[18],...e)})),{c(){n=u("strong"),i=d("A"),a=d(t[18]),o=g(),P(s.$$.fragment)},m(t,e){r(t,n,e),l(n,i),l(n,a),r(t,o,e),N(s,t,e),h=!0},p(e,n){t=e;const i=40&n?function(t,e){const n={},i={},a={$$scope:1};let o=t.length;for(;o--;){const s=t[o],l=e[o];if(l){for(const t in s)t in l||(i[t]=1);for(const t in l)a[t]||(n[t]=l[t],a[t]=1);t[o]=l}else for(const t in s)a[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}(f,[32&n&&(a=t[16],"object"==typeof a&&null!==a?a:{}),8&n&&{inputValues:t[3]},0&n&&{scalingFactor:tt}]):{};var a;s.$set(i)},i(t){h||(B(s.$$.fragment,t),h=!0)},o(t){M(s.$$.fragment,t),h=!1},d(t){t&&c(n),t&&c(o),S(s,t)}}}function ft(t){let e,n,i=t[13],a=[];for(let e=0;e<i.length;e+=1)a[e]=gt(ut(t,i,e));const o=t=>M(a[t],1,1,(()=>{a[t]=null}));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=d("")},m(t,i){for(let e=0;e<a.length;e+=1)a[e].m(t,i);r(t,e,i),n=!0},p(t,n){if(104&n){let s;for(i=t[13],s=0;s<i.length;s+=1){const o=ut(t,i,s);a[s]?(a[s].p(o,n),B(a[s],1)):(a[s]=gt(o),a[s].c(),B(a[s],1),a[s].m(e.parentNode,e))}for(L(),s=i.length;s<a.length;s+=1)o(s);O()}},i(t){if(!n){for(let t=0;t<i.length;t+=1)B(a[t]);n=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)M(a[t]);n=!1},d(t){h(a,t),t&&c(e)}}}function mt(t){let e,n,i,a,o,s,l=t[5],d=[];for(let e=0;e<l.length;e+=1)d[e]=ft(dt(t,l,e));const f=t=>M(d[t],1,1,(()=>{d[t]=null}));return{c(){e=u("div");for(let t=0;t<d.length;t+=1)d[t].c();n=g(),i=u("canvas"),m(e,"aria-hidden","true"),e.hidden=!0,m(i,"class","box-shadow svelte-3wjll6"),m(i,"width",a=6*t[1]+t[4]),m(i,"height",o=2.5*t[2])},m(a,o){r(a,e,o);for(let t=0;t<d.length;t+=1)d[t].m(e,null);r(a,n,o),r(a,i,o),t[9](i),s=!0},p(t,[n]){if(104&n){let i;for(l=t[5],i=0;i<l.length;i+=1){const a=dt(t,l,i);d[i]?(d[i].p(a,n),B(d[i],1)):(d[i]=ft(a),d[i].c(),B(d[i],1),d[i].m(e,null))}for(L(),i=l.length;i<d.length;i+=1)f(i);O()}(!s||18&n&&a!==(a=6*t[1]+t[4]))&&m(i,"width",a),(!s||4&n&&o!==(o=2.5*t[2]))&&m(i,"height",o)},i(t){if(!s){for(let t=0;t<l.length;t+=1)B(d[t]);s=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)M(d[t]);s=!1},d(a){a&&c(e),h(d,a),a&&c(n),a&&c(i),t[9](null)}}}function pt(t,e,n){let{drawables:i=[]}=e,{triangleHeight:a}=e,{canvas:o=null}=e;const s=$(),l=[{relativeRectangle:{x:.5-X,y:0,width:X,height:.5}},{relativeRectangle:{x:.5,y:0,width:X,height:.5}},{rotation:(t,e)=>{const n=t.getContext("2d");n.rotate(et(-90)),n.drawImage(e,-1*e.width,0)},secondRotation:(t,e)=>{const n=t.getContext("2d");n.translate(0,t.height/2),n.rotate(et(-30)),n.drawImage(e,0,0)},secondCanvasDimensions:(t,e)=>({height:t,width:e}),relativeRectangle:{x:.5,y:.25,width:X,height:.5}},{rotation:(t,e)=>{const n=t.getContext("2d");n.rotate(et(-30)),n.drawImage(e,0,0)},secondRotation:(t,e)=>{const n=t.getContext("2d");n.rotate(et(-90)),n.drawImage(e,-1*u.triangleBase,0)},secondCanvasDimensions:(t,e)=>({height:t,width:e}),relativeRectangle:{x:.5,y:.5,width:X,height:.5}},{rotation:(t,e)=>{const n=t.getContext("2d");n.rotate(et(90)),n.drawImage(e,0,-1*t.width)},secondRotation:(t,e)=>{const n=t.getContext("2d");n.translate(t.width,t.height),n.rotate(et(30)),n.drawImage(e,-1*t.height,-1*t.width)},secondCanvasDimensions:(t,e)=>({height:t,width:e}),relativeRectangle:{x:.5-X,y:.5,width:X,height:.5}},{rotation:(t,e)=>{const n=t.getContext("2d");n.translate(t.width,0),n.rotate(et(90)),n.drawImage(e,0,0)},secondRotation:(t,e)=>{const n=t.getContext("2d");n.rotate(et(30)),n.drawImage(e,0,0)},secondCanvasDimensions:(t,e)=>({height:t,width:e}),relativeRectangle:{x:.5-X,y:.25,width:X,height:.5}}];function r({detail:t},e,n){e%2==0?0===n?c.drawImage(t,5*t.width,e*(h/2)):c.drawImage(t,(n-1)*t.width,e*(h/2)):c.drawImage(t,n*t.width,e*(h/2)),s("finish",o)}let c,h,u,d,g;return t.$$set=t=>{"drawables"in t&&n(7,i=t.drawables),"triangleHeight"in t&&n(1,a=t.triangleHeight),"canvas"in t&&n(0,o=t.canvas)},t.$$.update=()=>{1&t.$$.dirty&&(c=null==o?void 0:o.getContext("2d")),2&t.$$.dirty&&n(2,h=a),6&t.$$.dirty&&n(3,u={triangleBase:h,triangleHeight:a}),2&t.$$.dirty&&n(4,d=Math.ceil(.4*a)),128&t.$$.dirty&&n(5,g=i.some((t=>!(t instanceof HTMLImageElement)))?[]:i.map((t=>Array(6).fill(0).map(((e,n)=>Object.assign({image:t,clippingTriangle:n%2==1?it:nt},l[n]))))))},[o,a,h,u,d,g,r,i,(t,e,n)=>r(n,t,e),function(t){y[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class vt extends V{constructor(t){super(),A(this,t,pt,mt,s,{drawables:7,triangleHeight:1,canvas:0})}get drawables(){return this.$$.ctx[7]}set drawables(t){this.$set({drawables:t}),H()}get triangleHeight(){return this.$$.ctx[1]}set triangleHeight(t){this.$set({triangleHeight:t}),H()}get canvas(){return this.$$.ctx[0]}set canvas(t){this.$set({canvas:t}),H()}}const{document:wt}=D;function xt(t){let e;return{c(){e=d("Please select 4 images before continuing.\n          ")},m(t,n){r(t,e,n)},d(t){t&&c(e)}}}function $t(t){let e,n;return{c(){e=u("strong"),e.textContent="Your template is ready!",n=g()},m(t,i){r(t,e,i),r(t,n,i)},d(t){t&&c(e),t&&c(n)}}}function bt(t){let e,n,i,o,s,h,v,w,x,$,b,y,C,T,R,q,E,F,_,H,z,I,k,L,O,D,j,A,V,G,J,U,W,Y,K,Q,X,tt,et,nt,it,at,ot,st=t[2]?"Hide":"Show",lt=(new Date).getFullYear()+"";function rt(t,e){return t[5]?$t:xt}x=new Z({props:{images:t[3]}}),x.$on("filesChange",t[6]);let ct=rt(t),ht=ct(t),ut={drawables:t[4],triangleHeight:yt};return j=new vt({props:ut}),t[10](j),j.$on("finish",t[7]),{c(){e=u("meta"),n=u("meta"),i=g(),o=u("div"),s=u("header"),s.innerHTML='<h1 class="svelte-izv8q4">Flextangler <small class="svelte-izv8q4">beta</small></h1> \n    <p class="svelte-izv8q4"><strong>Flextangler</strong>\n      is a web app that helps you create flextangles with your own images.\n      <strong>None of your files are sent to a server! All processing is done in\n        your browser.</strong>\n      In fact, you can use this website completely offline.</p> \n    <p class="svelte-izv8q4">The app will then transform your images to fit the flextangle template.\n      Please note that the cutting is based on the largest possible hexagon in\n      the center of each image. To make sure you have the desired outcome, you\n      can upload squared images that are at least 250×250px in size.</p> \n    <p class="svelte-izv8q4">Simply select four images with the boxes below. If you\n      select more than one file, they are put into the subsequent boxes.</p>',h=g(),v=u("main"),w=u("section"),P(x.$$.fragment),$=g(),b=u("section"),y=u("p"),ht.c(),C=u("br"),T=d("\n        Download the image or verify the outcome in the preview beforehand."),R=g(),q=u("section"),E=u("button"),F=d("Download template"),H=g(),z=u("button"),I=d(st),k=d(" preview"),O=g(),D=u("section"),P(j.$$.fragment),V=g(),G=u("section"),G.innerHTML='<p class="svelte-izv8q4">Print the template and follow the\n      <a href="https://i.imgur.com/9Fmn6Da.mp4" rel="noopener" class="svelte-izv8q4">cutting and folding instructions</a>.<br/>\n        Lastly make sure you share this website with your family and friends, if you like it.</p>',J=g(),U=u("footer"),W=d("Created by\n    "),Y=u("a"),Y.textContent="JanMalch 👨🏻‍💻",K=d("\n    and Lorenz 🧠 •\n    "),Q=u("a"),Q.textContent="Source Code",X=d("\n    •\n    "),tt=u("a"),tt.textContent="v"+Tt,et=d("\n    • © JanMalch,\n    "),nt=d(lt),m(e,"name","dc.created"),m(e,"content",Ct),m(n,"name","version"),m(n,"content",Tt),m(s,"class","container svelte-izv8q4"),m(w,"class","svelte-izv8q4"),m(y,"class","svelte-izv8q4"),m(b,"class","svelte-izv8q4"),m(E,"class","btn box-shadow svelte-izv8q4"),E.disabled=_=!t[5],m(z,"class","btn box-shadow svelte-izv8q4"),z.disabled=L=!t[5],m(q,"id","actions"),m(q,"class","svelte-izv8q4"),D.hidden=A=!t[2],m(D,"class","svelte-izv8q4"),m(G,"class","svelte-izv8q4"),m(v,"class","container svelte-izv8q4"),m(Y,"href","https://github.com/JanMalch"),m(Y,"rel","noopener"),m(Q,"href","https://github.com/JanMalch/flextangler"),m(Q,"rel","noopener"),m(tt,"href","https://github.com/JanMalch/flextangler/blob/master/CHANGELOG.md"),m(tt,"rel","noopener"),m(U,"class","container svelte-izv8q4"),m(o,"class","content svelte-izv8q4")},m(a,c){l(wt.head,e),l(wt.head,n),r(a,i,c),r(a,o,c),l(o,s),l(o,h),l(o,v),l(v,w),N(x,w,null),l(v,$),l(v,b),l(b,y),ht.m(y,null),l(y,C),l(y,T),l(v,R),l(v,q),l(q,E),l(E,F),l(q,H),l(q,z),l(z,I),l(z,k),l(v,O),l(v,D),N(j,D,null),t[11](D),l(v,V),l(v,G),l(o,J),l(o,U),l(U,W),l(U,Y),l(U,K),l(U,Q),l(U,X),l(U,tt),l(U,et),l(U,nt),it=!0,at||(ot=[f(E,"click",t[9]),f(z,"click",t[8])],at=!0)},p(t,[e]){const n={};8&e&&(n.images=t[3]),x.$set(n),ct!==(ct=rt(t))&&(ht.d(1),ht=ct(t),ht&&(ht.c(),ht.m(y,C))),(!it||32&e&&_!==(_=!t[5]))&&(E.disabled=_),(!it||4&e)&&st!==(st=t[2]?"Hide":"Show")&&p(I,st),(!it||32&e&&L!==(L=!t[5]))&&(z.disabled=L);const i={};16&e&&(i.drawables=t[4]),j.$set(i),(!it||4&e&&A!==(A=!t[2]))&&(D.hidden=A)},i(t){it||(B(x.$$.fragment,t),B(j.$$.fragment,t),it=!0)},o(t){M(x.$$.fragment,t),M(j.$$.fragment,t),it=!1},d(s){c(e),c(n),s&&c(i),s&&c(o),S(x),ht.d(),t[10](null),S(j),t[11](null),at=!1,a(ot)}}}let yt=200;const Ct="2020-11-12T21:02:39.124Z",Tt="0.0.2";function Rt(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function s(t){try{r(i.next(t))}catch(t){o(t)}}function l(t){try{r(i.throw(t))}catch(t){o(t)}}function r(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}r((i=i.apply(t,e||[])).next())}))};let a,o,s=!1,l=[],r=[],c=!1;return[a,o,s,l,r,c,function({detail:t}){return i(this,void 0,void 0,(function*(){n(4,r=[]),l.forEach((t=>URL.revokeObjectURL(t.src))),n(3,l=t.map((t=>({src:null==t?null:URL.createObjectURL(t),alt:null==t?void 0:t.name})))),n(4,r=yield Promise.all(l.map((t=>{return e=t.src,new Promise(((t,n)=>{if(null==e)return Promise.resolve(null);const i=new Image;i.addEventListener("load",(()=>t(i)),{once:!0}),i.addEventListener("error",(t=>n(t)),{once:!0}),i.src=e}));var e}))))}))},function(){n(5,c=!0)},function(){n(2,s=!s),s&&setTimeout((()=>a.scrollIntoView()))},function(){const t=document.createElement("a");t.download="flextangle-template.png",t.href=o.canvas.toDataURL("image/png"),t.target="_blank",t.click()},function(t){y[t?"unshift":"push"]((()=>{o=t,n(1,o)}))},function(t){y[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}return new class extends V{constructor(t){super(),A(this,t,Rt,bt,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map

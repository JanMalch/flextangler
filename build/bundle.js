var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(n)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function h(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function g(){return d(" ")}function f(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let v;function w(t){v=t}function x(){if(!v)throw new Error("Function called outside component initialization");return v}function $(){const t=x();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const o=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);i.slice().forEach((e=>{e.call(t,o)}))}}}const b=[],y=[],C=[],T=[],R=Promise.resolve();let q=!1;function E(t){C.push(t)}let L=!1;const F=new Set;function _(){if(!L){L=!0;do{for(let t=0;t<b.length;t+=1){const e=b[t];w(e),H(e.$$)}for(w(null),b.length=0;y.length;)y.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];F.has(e)||(F.add(e),e())}C.length=0}while(b.length);for(;T.length;)T.pop()();q=!1,L=!1,F.clear()}}function H(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const z=new Set;let I;function k(){I={r:0,c:[],p:I}}function O(){I.r||o(I.c),I=I.p}function B(t,e){t&&t.i&&(z.delete(t),t.i(e))}function M(t,e,n,i){if(t&&t.o){if(z.has(t))return;z.add(t),I.c.push((()=>{z.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}const D="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function P(t){t&&t.c()}function N(t,e,i){const{fragment:s,on_mount:l,on_destroy:r,after_update:c}=t.$$;s&&s.m(e,i),E((()=>{const e=l.map(n).filter(a);r?r.push(...e):o(e),t.$$.on_mount=[]})),c.forEach(E)}function S(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function j(t,e){-1===t.$$.dirty[0]&&(b.push(t),q||(q=!0,R.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(e,n,a,s,l,r,h=[-1]){const u=v;w(e);const d=n.props||{},g=e.$$={fragment:null,ctx:null,props:r,update:t,not_equal:l,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:i(),dirty:h,skip_bound:!1};let f=!1;if(g.ctx=a?a(e,d,((t,n,...i)=>{const o=i.length?i[0]:n;return g.ctx&&l(g.ctx[t],g.ctx[t]=o)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](o),f&&j(e,t)),n})):[],g.update(),f=!0,o(g.before_update),g.fragment=!!s&&s(g.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);g.fragment&&g.fragment.l(t),t.forEach(c)}else g.fragment&&g.fragment.c();n.intro&&B(e.$$.fragment),N(e,n.target,n.anchor),_()}w(u)}class V{$destroy(){S(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function G(t,e,n){const i=t.slice();return i[7]=e[n],i[8]=e,i[9]=n,i}function J(t){let e,n,i;return{c(){e=u("img"),e.src!==(n=t[0][t[9]].src)&&m(e,"src",n),m(e,"alt",i=t[0][t[9]].alt+"}"),m(e,"class","svelte-1a5vzeb")},m(t,n){r(t,e,n)},p(t,o){1&o&&e.src!==(n=t[0][t[9]].src)&&m(e,"src",n),1&o&&i!==(i=t[0][t[9]].alt+"}")&&m(e,"alt",i)},d(t){t&&c(e)}}}function U(t){let e,n,i,a,s,h,v,w,x,$,b,y,C=null==t[0][t[9]]?`Select one ${3!==t[9]?"or more":""} image${3===t[9]?"":"s"}.`:"Swap image.",T=t[9],R=null!=t[0][t[9]]&&J(t);function q(...e){return t[3](t[9],...e)}const E=()=>t[4](v,T),L=()=>t[4](null,T);function F(...e){return t[5](t[9],...e)}return{c(){var o,l,r,c;e=u("div"),R&&R.c(),n=g(),i=u("label"),a=d(C),h=g(),v=u("input"),$=g(),m(i,"for",s="file-"+t[9]),m(i,"class","svelte-1a5vzeb"),m(v,"id",w="file-"+t[9]),m(v,"type","file"),m(v,"accept","image/*"),v.multiple=x=3!==t[9],m(v,"class","svelte-1a5vzeb"),m(e,"class","box-shadow svelte-1a5vzeb"),o=e,l="grid-area",r=String.fromCharCode(t[9]+97),o.style.setProperty(l,r,c?"important":"")},m(t,o){r(t,e,o),R&&R.m(e,null),l(e,n),l(e,i),l(i,a),l(e,h),l(e,v),E(),l(e,$),b||(y=[f(i,"click",q),f(v,"change",F)],b=!0)},p(i,o){null!=(t=i)[0][t[9]]?R?R.p(t,o):(R=J(t),R.c(),R.m(e,n)):R&&(R.d(1),R=null),1&o&&C!==(C=null==t[0][t[9]]?`Select one ${3!==t[9]?"or more":""} image${3===t[9]?"":"s"}.`:"Swap image.")&&p(a,C),T!==t[9]&&(L(),T=t[9],E())},d(t){t&&c(e),R&&R.d(),L(),b=!1,o(y)}}}function W(e){let n,i=e[1],o=[];for(let t=0;t<i.length;t+=1)o[t]=U(G(e,i,t));return{c(){n=u("form");for(let t=0;t<o.length;t+=1)o[t].c();m(n,"class","svelte-1a5vzeb")},m(t,e){r(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(7&e){let a;for(i=t[1],a=0;a<i.length;a+=1){const s=G(t,i,a);o[a]?o[a].p(s,e):(o[a]=U(s),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},i:t,o:t,d(t){t&&c(n),h(o,t)}}}function Y(t,e,n){let{images:i=[]}=e;const o=$();let a=Array(4).fill(null);function s(t,e){const i=a[e].files,s=Math.min(4,e+i.length);for(let t=e;t<s;t++){const o=new DataTransfer;o.items.add(i.item(t-e)),n(1,a[t].files=o.files,a)}const l=a.map((t=>t.files.item(0)));o("filesChange",l)}return t.$$set=t=>{"images"in t&&n(0,i=t.images)},[i,a,s,t=>a[t]?.click(),function(t,e){y[t?"unshift":"push"]((()=>{a[e]=t,n(1,a)}))},(t,e)=>s(0,t)]}class Z extends V{constructor(t){super(),A(this,t,Y,W,s,{images:0})}}function K(t,e){return Object.freeze({x:t,y:e})}const Q=K(0,0),X=Math.sqrt(3)/4,tt=2/Math.sqrt(3);K(0,.5),K(.5,.5),K(.25,X+.5),K(0,.5),K(.5,.5),K(.25,.5-X),K(.25,.5-X),K(.75,.5-X),K(.5,.5),K(.75,.5-X),K(1,.5),K(.5,.5),K(.5,.5),K(1,.5),K(.75,.5+X),K(.5,.5),K(.25,.5+X),K(.75,.5+X);function et(t){return Math.PI*t/180}const nt=[{x:0,y:.5},{x:1,y:1},{x:1,y:0}],it=[{x:0,y:0},{x:1,y:.5},{x:0,y:1}];function ot(t,e,n,i){t.moveTo(0,0),t.translate(e.x+e.width*n.x,e.y+e.height*n.y),t.rotate(et(i))}function at(t,e){return Object.assign(Object.assign({},t),{x:t.x+e.x,y:t.y+e.y})}function st(t,e,n,i,o){null!=o?t.drawImage(n,o.x,o.y,o.width,o.height,i.x+e.x,i.y+e.y,i.width,i.height):t.drawImage(n,i.x+e.x,i.y+e.y,i.width,i.height)}function lt(t,e,n,i,o){t.save(),t.beginPath(),function(t,e,n){const i=at(e,n[0]);t.moveTo(i.x,i.y);for(let i=1;i<n.length;i++){const o=at(e,n[i]);t.lineTo(o.x,o.y)}}(t,n,i),t.closePath(),t.clip(),e&&(t.setLineDash([5,5]),t.lineWidth=3,t.strokeStyle="#FF0000",t.stroke()),o(),t.restore()}function rt(e){let n,i,o,a,s,h,f,v,w,x,$,b,y,C,T,R,q,E,L,F,_,H,z,I,k,O,B,M,D,P,N,S,j,A,V,G,J,U,W,Y,Z,K,Q,tt,et,nt,it,ot,at=e[3]?.width.toFixed(2)+"",st=e[3]?.height.toFixed(2)+"",lt=e[4]?.width.toFixed(2)+"",rt=e[4]?.height.toFixed(2)+"",ct=e[5]?.width.toFixed(2)+"",ht=e[5]?.height.toFixed(2)+"",ut=e[6]?.width.toFixed(2)+"",dt=e[6]?.height.toFixed(2)+"";return{c(){n=u("section"),i=u("div"),o=u("b"),a=d("toTriangleCanvas ("),s=d(at),h=d("\n      ×\n      "),f=d(st),v=d(")"),w=g(),x=u("canvas"),y=g(),C=u("div"),T=u("b"),R=d("rotatedTriangleCanvas ("),q=d(lt),E=d("\n      ×\n      "),L=d(rt),F=d(")"),_=g(),H=u("canvas"),k=g(),O=u("div"),B=u("b"),M=d("fullRotatedTriangleCanvas ("),D=d(ct),P=d("\n      ×\n      "),N=d(ht),S=d(")"),j=g(),A=u("canvas"),J=g(),U=u("div"),W=u("b"),Y=d("scaledRotatedTriangleCanvas ("),Z=d(ut),K=d("\n      ×\n      "),Q=d(dt),tt=d(")"),et=g(),nt=u("canvas"),m(o,"class","svelte-1qb62l3"),m(x,"height",$=e[0].triangleHeight),m(x,"width",b=e[0].triangleBase*(2*X)),m(x,"class","svelte-1qb62l3"),m(T,"class","svelte-1qb62l3"),m(H,"height",z=e[1](e[0].triangleBase*(2*X),e[0].triangleHeight).height),m(H,"width",I=e[1](e[0].triangleBase*(2*X),e[0].triangleHeight).width),m(H,"class","svelte-1qb62l3"),m(B,"class","svelte-1qb62l3"),m(A,"height",V=e[0].triangleHeight),m(A,"width",G=e[0].triangleBase*(2*X)),m(A,"class","svelte-1qb62l3"),m(W,"class","svelte-1qb62l3"),m(nt,"height",it=e[0].triangleHeight),m(nt,"width",ot=e[0].triangleBase*(2*X)*e[2]),m(nt,"class","svelte-1qb62l3"),m(n,"class","svelte-1qb62l3")},m(t,c){r(t,n,c),l(n,i),l(i,o),l(o,a),l(o,s),l(o,h),l(o,f),l(o,v),l(i,w),l(i,x),e[13](x),l(n,y),l(n,C),l(C,T),l(T,R),l(T,q),l(T,E),l(T,L),l(T,F),l(C,_),l(C,H),e[14](H),l(n,k),l(n,O),l(O,B),l(B,M),l(B,D),l(B,P),l(B,N),l(B,S),l(O,j),l(O,A),e[15](A),l(n,J),l(n,U),l(U,W),l(W,Y),l(W,Z),l(W,K),l(W,Q),l(W,tt),l(U,et),l(U,nt),e[16](nt)},p(t,[e]){8&e&&at!==(at=t[3]?.width.toFixed(2)+"")&&p(s,at),8&e&&st!==(st=t[3]?.height.toFixed(2)+"")&&p(f,st),1&e&&$!==($=t[0].triangleHeight)&&m(x,"height",$),1&e&&b!==(b=t[0].triangleBase*(2*X))&&m(x,"width",b),16&e&&lt!==(lt=t[4]?.width.toFixed(2)+"")&&p(q,lt),16&e&&rt!==(rt=t[4]?.height.toFixed(2)+"")&&p(L,rt),3&e&&z!==(z=t[1](t[0].triangleBase*(2*X),t[0].triangleHeight).height)&&m(H,"height",z),3&e&&I!==(I=t[1](t[0].triangleBase*(2*X),t[0].triangleHeight).width)&&m(H,"width",I),32&e&&ct!==(ct=t[5]?.width.toFixed(2)+"")&&p(D,ct),32&e&&ht!==(ht=t[5]?.height.toFixed(2)+"")&&p(N,ht),1&e&&V!==(V=t[0].triangleHeight)&&m(A,"height",V),1&e&&G!==(G=t[0].triangleBase*(2*X))&&m(A,"width",G),64&e&&ut!==(ut=t[6]?.width.toFixed(2)+"")&&p(Z,ut),64&e&&dt!==(dt=t[6]?.height.toFixed(2)+"")&&p(Q,dt),1&e&&it!==(it=t[0].triangleHeight)&&m(nt,"height",it),5&e&&ot!==(ot=t[0].triangleBase*(2*X)*t[2])&&m(nt,"width",ot)},i:t,o:t,d(t){t&&c(n),e[13](null),e[14](null),e[15](null),e[16](null)}}}function ct(t,e,n){let{image:i}=e,{inputValues:o}=e,{rotation:a}=e,{secondRotation:s}=e,{secondCanvasDimensions:l=((t,e)=>({width:t,height:e}))}=e,{scalingFactor:r}=e,{clippingTriangle:c}=e,{relativeRectangle:h}=e,{showLines:u}=e,d=null,g=null,f=null,m=null;const p=$();var v;return v=()=>(function(){const t=d.getContext("2d");t.clearRect(0,0,d.width,d.height),t.save(),lt(t,u,Q,c.map((t=>({x:t.x*d.width,y:t.y*d.height}))),(()=>{st(t,Q,i,{x:0,y:0,width:d.width,height:d.height},{x:h.x*i.naturalWidth,y:h.y*i.naturalHeight,width:h.width*i.naturalWidth,height:h.height*i.naturalHeight})})),t.restore()}(),function(){const t=g.getContext("2d");t.save(),a?a(g,d):t.drawImage(d,0,0),t.restore()}(),function(){const t=f.getContext("2d");t.save(),s?s(f,g):t.drawImage(g,0,0),t.restore()}(),function(){const t=m.getContext("2d");t.save(),st(t,Q,f,{x:0,y:0,width:m.width,height:m.height},{x:0,y:0,width:f.width,height:f.height}),t.restore()}(),void p("finish",m)),x().$$.after_update.push(v),t.$$set=t=>{"image"in t&&n(7,i=t.image),"inputValues"in t&&n(0,o=t.inputValues),"rotation"in t&&n(8,a=t.rotation),"secondRotation"in t&&n(9,s=t.secondRotation),"secondCanvasDimensions"in t&&n(1,l=t.secondCanvasDimensions),"scalingFactor"in t&&n(2,r=t.scalingFactor),"clippingTriangle"in t&&n(10,c=t.clippingTriangle),"relativeRectangle"in t&&n(11,h=t.relativeRectangle),"showLines"in t&&n(12,u=t.showLines)},[o,l,r,d,g,f,m,i,a,s,c,h,u,function(t){y[t?"unshift":"push"]((()=>{d=t,n(3,d)}))},function(t){y[t?"unshift":"push"]((()=>{g=t,n(4,g)}))},function(t){y[t?"unshift":"push"]((()=>{f=t,n(5,f)}))},function(t){y[t?"unshift":"push"]((()=>{m=t,n(6,m)}))}]}ot.LEFT_TOP=K(0,0),ot.CENTER_TOP=K(.5,0),ot.RIGHT_TOP=K(1,0),ot.LEFT_CENTER=K(0,.5),ot.CENTER_CENTER=K(.5,.5),ot.RIGHT_CENTER=K(1,.5),ot.LEFT_BOTTOM=K(0,1),ot.CENTER_BOTTOM=K(.5,1),ot.RIGHT_BOTTOM=K(1,1);class ht extends V{constructor(t){super(),A(this,t,ct,rt,s,{image:7,inputValues:0,rotation:8,secondRotation:9,secondCanvasDimensions:1,scalingFactor:2,clippingTriangle:10,relativeRectangle:11,showLines:12})}}function ut(t,e,n){const i=t.slice();return i[17]=e[n],i[19]=n,i}function dt(t,e,n){const i=t.slice();return i[14]=e[n],i[16]=n,i}function gt(t){let n,i,o,a,s,h;const f=[t[17],{showLines:t[2]},{inputValues:t[4]},{scalingFactor:tt}];let m={};for(let t=0;t<f.length;t+=1)m=e(m,f[t]);return s=new ht({props:m}),s.$on("finish",(function(...e){return t[9](t[16],t[19],...e)})),{c(){n=u("strong"),i=d("A"),o=d(t[19]),a=g(),P(s.$$.fragment)},m(t,e){r(t,n,e),l(n,i),l(n,o),r(t,a,e),N(s,t,e),h=!0},p(e,n){t=e;const i=84&n?function(t,e){const n={},i={},o={$$scope:1};let a=t.length;for(;a--;){const s=t[a],l=e[a];if(l){for(const t in s)t in l||(i[t]=1);for(const t in l)o[t]||(n[t]=l[t],o[t]=1);t[a]=l}else for(const t in s)o[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}(f,[64&n&&(o=t[17],"object"==typeof o&&null!==o?o:{}),4&n&&{showLines:t[2]},16&n&&{inputValues:t[4]},0&n&&{scalingFactor:tt}]):{};var o;s.$set(i)},i(t){h||(B(s.$$.fragment,t),h=!0)},o(t){M(s.$$.fragment,t),h=!1},d(t){t&&c(n),t&&c(a),S(s,t)}}}function ft(t){let e,n,i=t[14],o=[];for(let e=0;e<i.length;e+=1)o[e]=gt(ut(t,i,e));const a=t=>M(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=d("")},m(t,i){for(let e=0;e<o.length;e+=1)o[e].m(t,i);r(t,e,i),n=!0},p(t,n){if(212&n){let s;for(i=t[14],s=0;s<i.length;s+=1){const a=ut(t,i,s);o[s]?(o[s].p(a,n),B(o[s],1)):(o[s]=gt(a),o[s].c(),B(o[s],1),o[s].m(e.parentNode,e))}for(k(),s=i.length;s<o.length;s+=1)a(s);O()}},i(t){if(!n){for(let t=0;t<i.length;t+=1)B(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)M(o[t]);n=!1},d(t){h(o,t),t&&c(e)}}}function mt(t){let e,n,i,o,a,s,l=t[6],d=[];for(let e=0;e<l.length;e+=1)d[e]=ft(dt(t,l,e));const f=t=>M(d[t],1,1,(()=>{d[t]=null}));return{c(){e=u("div");for(let t=0;t<d.length;t+=1)d[t].c();n=g(),i=u("canvas"),m(e,"aria-hidden","true"),e.hidden=!0,m(i,"class","box-shadow svelte-3wjll6"),m(i,"width",o=6*t[1]+t[5]),m(i,"height",a=2.5*t[3])},m(o,a){r(o,e,a);for(let t=0;t<d.length;t+=1)d[t].m(e,null);r(o,n,a),r(o,i,a),t[10](i),s=!0},p(t,[n]){if(212&n){let i;for(l=t[6],i=0;i<l.length;i+=1){const o=dt(t,l,i);d[i]?(d[i].p(o,n),B(d[i],1)):(d[i]=ft(o),d[i].c(),B(d[i],1),d[i].m(e,null))}for(k(),i=l.length;i<d.length;i+=1)f(i);O()}(!s||34&n&&o!==(o=6*t[1]+t[5]))&&m(i,"width",o),(!s||8&n&&a!==(a=2.5*t[3]))&&m(i,"height",a)},i(t){if(!s){for(let t=0;t<l.length;t+=1)B(d[t]);s=!0}},o(t){d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)M(d[t]);s=!1},d(o){o&&c(e),h(d,o),o&&c(n),o&&c(i),t[10](null)}}}function pt(t,e,n){let{drawables:i=[]}=e,{triangleHeight:o}=e,{showLines:a=!0}=e,{canvas:s=null}=e;const l=$(),r=[{relativeRectangle:{x:.5-X,y:0,width:X,height:.5}},{relativeRectangle:{x:.5,y:0,width:X,height:.5}},{rotation:(t,e)=>{const n=t.getContext("2d");n.rotate(et(-90)),n.drawImage(e,-1*e.width,0)},secondRotation:(t,e)=>{const n=t.getContext("2d");n.translate(0,t.height/2),n.rotate(et(-30)),n.drawImage(e,0,0)},secondCanvasDimensions:(t,e)=>({height:t,width:e}),relativeRectangle:{x:.5,y:.25,width:X,height:.5}},{rotation:(t,e)=>{const n=t.getContext("2d");n.rotate(et(-30)),n.drawImage(e,0,0)},secondRotation:(t,e)=>{const n=t.getContext("2d");n.rotate(et(-90)),n.drawImage(e,-1*d.triangleBase,0)},secondCanvasDimensions:(t,e)=>({height:t,width:e}),relativeRectangle:{x:.5,y:.5,width:X,height:.5}},{rotation:(t,e)=>{const n=t.getContext("2d");n.rotate(et(90)),n.drawImage(e,0,-1*t.width)},secondRotation:(t,e)=>{const n=t.getContext("2d");n.translate(t.width,t.height),n.rotate(et(30)),n.drawImage(e,-1*t.height,-1*t.width)},secondCanvasDimensions:(t,e)=>({height:t,width:e}),relativeRectangle:{x:.5-X,y:.5,width:X,height:.5}},{rotation:(t,e)=>{const n=t.getContext("2d");n.translate(t.width,0),n.rotate(et(90)),n.drawImage(e,0,0)},secondRotation:(t,e)=>{const n=t.getContext("2d");n.rotate(et(30)),n.drawImage(e,0,0)},secondCanvasDimensions:(t,e)=>({height:t,width:e}),relativeRectangle:{x:.5-X,y:.25,width:X,height:.5}}];function c({detail:t},e,n){e%2==0?0===n?h.drawImage(t,5*t.width,e*(u/2)):h.drawImage(t,(n-1)*t.width,e*(u/2)):h.drawImage(t,n*t.width,e*(u/2)),l("finish",s)}let h,u,d,g,f;return t.$$set=t=>{"drawables"in t&&n(8,i=t.drawables),"triangleHeight"in t&&n(1,o=t.triangleHeight),"showLines"in t&&n(2,a=t.showLines),"canvas"in t&&n(0,s=t.canvas)},t.$$.update=()=>{1&t.$$.dirty&&(h=null==s?void 0:s.getContext("2d")),2&t.$$.dirty&&n(3,u=o),10&t.$$.dirty&&n(4,d={triangleBase:u,triangleHeight:o}),2&t.$$.dirty&&n(5,g=Math.ceil(.4*o)),256&t.$$.dirty&&n(6,f=i.some((t=>!(t instanceof HTMLImageElement)))?[]:i.map((t=>Array(6).fill(0).map(((e,n)=>Object.assign({image:t,clippingTriangle:n%2==1?it:nt},r[n]))))))},[s,o,a,u,d,g,f,c,i,(t,e,n)=>c(n,t,e),function(t){y[t?"unshift":"push"]((()=>{s=t,n(0,s)}))}]}class vt extends V{constructor(t){super(),A(this,t,pt,mt,s,{drawables:8,triangleHeight:1,showLines:2,canvas:0})}get drawables(){return this.$$.ctx[8]}set drawables(t){this.$set({drawables:t}),_()}get triangleHeight(){return this.$$.ctx[1]}set triangleHeight(t){this.$set({triangleHeight:t}),_()}get showLines(){return this.$$.ctx[2]}set showLines(t){this.$set({showLines:t}),_()}get canvas(){return this.$$.ctx[0]}set canvas(t){this.$set({canvas:t}),_()}}const{document:wt}=D;function xt(t){let e;return{c(){e=d("Please select 4 images before continuing.\n          ")},m(t,n){r(t,e,n)},d(t){t&&c(e)}}}function $t(t){let e,n;return{c(){e=u("strong"),e.textContent="Your template is ready!",n=g()},m(t,i){r(t,e,i),r(t,n,i)},d(t){t&&c(e),t&&c(n)}}}function bt(t){let e,n,i,a,s,h,v,w,x,$,b,y,C,T,R,q,E,L,F,_,H,z,I,k,O,D,j,A,V,G,J,U,W,Y,K,Q,X,tt,et,nt,it,ot,at,st=t[2]?"Hide":"Show",lt=(new Date).getFullYear()+"";function rt(t,e){return t[5]?$t:xt}x=new Z({props:{images:t[3]}}),x.$on("filesChange",t[6]);let ct=rt(t),ht=ct(t),ut={drawables:t[4],triangleHeight:Ct,showLines:yt};return j=new vt({props:ut}),t[10](j),j.$on("finish",t[7]),{c(){e=u("meta"),n=u("meta"),i=g(),a=u("div"),s=u("header"),s.innerHTML='<h1 class="svelte-izv8q4">Flextangler <small class="svelte-izv8q4">beta</small></h1> \n    <p class="svelte-izv8q4"><strong>Flextangler</strong>\n      is a web app that helps you create flextangles with your own images.\n      <strong>None of your files are sent to a server! All processing is done in\n        your browser.</strong>\n      In fact, you can use this website completely offline.</p> \n    <p class="svelte-izv8q4">The app will then transform your images to fit the flextangle template.\n      Please note that the cutting is based on the largest possible hexagon in\n      the center of each image. To make sure you have the desired outcome, you\n      can upload squared images that are at least 250×250px in size.</p> \n    <p class="svelte-izv8q4">Start by clicking on the boxes below to select four images. If you\n      select more that one, they are put into the subsequent boxes.</p>',h=g(),v=u("main"),w=u("section"),P(x.$$.fragment),$=g(),b=u("section"),y=u("p"),ht.c(),C=u("br"),T=d("\n        Download the image or verify the outcome in the preview beforehand."),R=g(),q=u("section"),E=u("button"),L=d("Download template"),_=g(),H=u("button"),z=d(st),I=d(" preview"),O=g(),D=u("section"),P(j.$$.fragment),V=g(),G=u("section"),G.innerHTML='<p class="svelte-izv8q4">Print the template and follow the\n      <a href="https://i.imgur.com/9Fmn6Da.mp4" rel="noopener" class="svelte-izv8q4">cutting and folding instructions</a>.<br/>\n        Lastly make sure you share this website with your family and friends, if you like it.</p>',J=g(),U=u("footer"),W=d("Created by\n    "),Y=u("a"),Y.textContent="JanMalch 👨🏻‍💻",K=d("\n    and Lorenz 🧠 •\n    "),Q=u("a"),Q.textContent="Source Code",X=d("\n    •\n    "),tt=u("a"),tt.textContent="v"+Rt,et=d("\n    • © JanMalch,\n    "),nt=d(lt),m(e,"name","dc.created"),m(e,"content",Tt),m(n,"name","version"),m(n,"content",Rt),m(s,"class","container svelte-izv8q4"),m(w,"class","svelte-izv8q4"),m(y,"class","svelte-izv8q4"),m(b,"class","svelte-izv8q4"),m(E,"class","btn box-shadow svelte-izv8q4"),E.disabled=F=!t[5],m(H,"class","btn box-shadow svelte-izv8q4"),H.disabled=k=!t[5],m(q,"id","actions"),m(q,"class","svelte-izv8q4"),D.hidden=A=!t[2],m(D,"class","svelte-izv8q4"),m(G,"class","svelte-izv8q4"),m(v,"class","container svelte-izv8q4"),m(Y,"href","https://github.com/JanMalch"),m(Y,"rel","noopener"),m(Q,"href","https://github.com/JanMalch/flextangler"),m(Q,"rel","noopener"),m(tt,"href","https://github.com/JanMalch/flextangler/blob/master/CHANGELOG.md"),m(tt,"rel","noopener"),m(U,"class","container svelte-izv8q4"),m(a,"class","content svelte-izv8q4")},m(o,c){l(wt.head,e),l(wt.head,n),r(o,i,c),r(o,a,c),l(a,s),l(a,h),l(a,v),l(v,w),N(x,w,null),l(v,$),l(v,b),l(b,y),ht.m(y,null),l(y,C),l(y,T),l(v,R),l(v,q),l(q,E),l(E,L),l(q,_),l(q,H),l(H,z),l(H,I),l(v,O),l(v,D),N(j,D,null),t[11](D),l(v,V),l(v,G),l(a,J),l(a,U),l(U,W),l(U,Y),l(U,K),l(U,Q),l(U,X),l(U,tt),l(U,et),l(U,nt),it=!0,ot||(at=[f(E,"click",t[9]),f(H,"click",t[8])],ot=!0)},p(t,[e]){const n={};8&e&&(n.images=t[3]),x.$set(n),ct!==(ct=rt(t))&&(ht.d(1),ht=ct(t),ht&&(ht.c(),ht.m(y,C))),(!it||32&e&&F!==(F=!t[5]))&&(E.disabled=F),(!it||4&e)&&st!==(st=t[2]?"Hide":"Show")&&p(z,st),(!it||32&e&&k!==(k=!t[5]))&&(H.disabled=k);const i={};16&e&&(i.drawables=t[4]),j.$set(i),(!it||4&e&&A!==(A=!t[2]))&&(D.hidden=A)},i(t){it||(B(x.$$.fragment,t),B(j.$$.fragment,t),it=!0)},o(t){M(x.$$.fragment,t),M(j.$$.fragment,t),it=!1},d(s){c(e),c(n),s&&c(i),s&&c(a),S(x),ht.d(),t[10](null),S(j),t[11](null),ot=!1,o(at)}}}let yt=!0,Ct=200;const Tt="2020-11-12T20:36:41.475Z",Rt="0.0.1";function qt(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{r(i.next(t))}catch(t){a(t)}}function l(t){try{r(i.throw(t))}catch(t){a(t)}}function r(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}r((i=i.apply(t,e||[])).next())}))};let o,a,s=!1,l=[],r=[],c=!1;return[o,a,s,l,r,c,function({detail:t}){return i(this,void 0,void 0,(function*(){n(4,r=[]),l.forEach((t=>URL.revokeObjectURL(t.src))),n(3,l=t.map((t=>({src:null==t?null:URL.createObjectURL(t),alt:null==t?void 0:t.name})))),n(4,r=yield Promise.all(l.map((t=>{return e=t.src,new Promise(((t,n)=>{if(null==e)return Promise.resolve(null);const i=new Image;i.addEventListener("load",(()=>t(i)),{once:!0}),i.addEventListener("error",(t=>n(t)),{once:!0}),i.src=e}));var e}))))}))},function(){n(5,c=!0)},function(){n(2,s=!s),s&&setTimeout((()=>o.scrollIntoView()))},function(){const t=document.createElement("a");t.download="flextangle-template.png",t.href=a.canvas.toDataURL("image/png"),t.target="_blank",t.click()},function(t){y[t?"unshift":"push"]((()=>{a=t,n(1,a)}))},function(t){y[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}return new class extends V{constructor(t){super(),A(this,t,qt,bt,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
